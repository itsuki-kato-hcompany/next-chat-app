# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

type User {
  id: Float!
  name: String!
  email: String!
  profileImgPath: String
  deletedAt: DateTime
  createdAt: DateTime!
  updatedAt: DateTime!
}

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

type Channel {
  id: Float!
  name: String!
  isArchive: Boolean!
  deletedAt: DateTime
  createdAt: DateTime!
  updatedAt: DateTime!
  creatorId: Float!
  updaterId: Float!
}

type Message {
  id: Float!
  message: String!
  createdAt: DateTime!
  updatedAt: DateTime!
  user: User
  channel: Channel
  userId: Float!
  channelId: Float!
}

type AuthTokens {
  accessToken: String!
}

type InviteToChannelResult {
  channel: Channel!
  invitedUsers: [User!]!
  alreadyMemberUsers: [User!]!
  notFoundUserIds: [Int!]!
}

type ValidateChannelInvitationResult {
  validUsers: [User!]!
  alreadyMemberUsers: [User!]!
  notFoundUserIds: [Int!]!
}

type Query {
  me: User

  """開発環境専用: テスト用アクセストークン取得"""
  getAccessToken(userId: Int!): AuthTokens!
  messages(limit: Float = 50, offset: Float = 0, channelId: Float!): [Message!]!
  channels: [Channel!]!
  channel(id: Float!): Channel
  validateChannelInvitation(input: InviteToChannelInput!): ValidateChannelInvitationResult!
}

input InviteToChannelInput {
  channelId: Int!
  userIds: [Int!]!
}

type Mutation {
  refreshToken: AuthTokens!
  addMessage(messageInput: CreateMessageInput!): Message!
  createChannel(input: CreateChannelInput!): Channel!
  joinChannel(input: JoinChannelInput!): Channel!
  inviteToChannel(input: InviteToChannelInput!): InviteToChannelResult!
}

input CreateMessageInput {
  message: String!
  userId: Int!
  channelId: Int!
}

input CreateChannelInput {
  name: String!
}

input JoinChannelInput {
  channelId: Int!
}

type Subscription {
  messageAdded: Message!
}